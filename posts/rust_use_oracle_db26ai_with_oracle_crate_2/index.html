<!DOCTYPE html>
<html lang="en-us">
    <head>
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="robots" content="noodp" />
        <title>Using Oracle db26ai from Rust with the oracle crate - Jorge Ortiz-Fuentes&#39; DevBites</title><meta name="Description" content="Ferris using the keyboard to work with data"><meta property="og:url" content="https://jorgeortiz.dev/posts/rust_use_oracle_db26ai_with_oracle_crate_2/">
  <meta property="og:site_name" content="Jorge Ortiz-Fuentes&#39; DevBites">
  <meta property="og:title" content="Using Oracle db26ai from Rust with the oracle crate">
  <meta property="og:description" content="Ferris using the keyboard to work with data">
  <meta property="og:locale" content="en_us">
  <meta property="og:type" content="article">
    <meta property="article:section" content="posts">
    <meta property="article:published_time" content="2026-01-23T00:00:00+00:00">
    <meta property="article:modified_time" content="2026-01-23T00:00:00+00:00">
    <meta property="article:tag" content="Rust">
    <meta property="article:tag" content="Db">
    <meta property="og:image" content="https://jorgeortiz.dev/logo.png">

  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:image" content="https://jorgeortiz.dev/logo.png">
  <meta name="twitter:title" content="Using Oracle db26ai from Rust with the oracle crate">
  <meta name="twitter:description" content="Ferris using the keyboard to work with data">
<meta name="application-name" content="Jorge Ortiz-Fuentes&#39; DevBites">
<meta name="apple-mobile-web-app-title" content="Jorge Ortiz-Fuentes&#39; DevBites"><meta name="theme-color" content="#ffffff"><meta name="msapplication-TileColor" content="#da532c"><link rel="icon" href="/favicon.svg"><link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png"><link rel="mask-icon" href="/safari-pinned-tab.svg" color="#5bbad5"><link rel="manifest" href="/site.webmanifest"><link rel="canonical" href="https://jorgeortiz.dev/posts/rust_use_oracle_db26ai_with_oracle_crate_2/" /><link rel="prev" href="https://jorgeortiz.dev/posts/rust_use_oracle_db26ai_with_sibyl_crate_1/" /><link rel="stylesheet" href="/css/style.min.css"><link rel="preload" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@6.1.1/css/all.min.css" as="style" onload="this.onload=null;this.rel='stylesheet'">
        <noscript><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@6.1.1/css/all.min.css"></noscript><link rel="preload" href="https://cdn.jsdelivr.net/npm/animate.css@4.1.1/animate.min.css" as="style" onload="this.onload=null;this.rel='stylesheet'">
        <noscript><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/animate.css@4.1.1/animate.min.css"></noscript><script type="application/ld+json">
    {
        "@context": "http://schema.org",
        "@type": "BlogPosting",
        "headline": "Using Oracle db26ai from Rust with the oracle crate",
        "inLanguage": "en-us",
        "mainEntityOfPage": {
            "@type": "WebPage",
            "@id": "https:\/\/jorgeortiz.dev\/posts\/rust_use_oracle_db26ai_with_oracle_crate_2\/"
        },"genre": "posts","keywords": "rust, db","wordcount":  1715 ,
        "url": "https:\/\/jorgeortiz.dev\/posts\/rust_use_oracle_db26ai_with_oracle_crate_2\/","datePublished": "2026-01-23T00:00:00+00:00","dateModified": "2026-01-23T00:00:00+00:00","license": "\u0026copy; 2025 Jorge D. Ortiz Fuentes","publisher": {
            "@type": "Organization",
            "name": ""},"author": {
                "@type": "Person",
                "name": "Jorge Ortiz-Fuentes"
            },"description": "Ferris using the keyboard to work with data"
    }
    </script></head>
    <body data-header-desktop="fixed" data-header-mobile="auto"><script type="text/javascript">(window.localStorage && localStorage.getItem('theme') ? localStorage.getItem('theme') === 'dark' : ('auto' === 'auto' ? window.matchMedia('(prefers-color-scheme: dark)').matches : 'auto' === 'dark')) && document.body.setAttribute('theme', 'dark');</script>

        <div id="mask"></div><div class="wrapper"><header class="desktop" id="header-desktop">
    <div class="header-wrapper">
        <div class="header-title">
            <a href="/" title="Jorge Ortiz-Fuentes&#39; DevBites">Jorge Ortiz-Fuentes&#39; DevBites</a>
        </div>
        <div class="menu">
            <div class="menu-inner"><a class="menu-item" href="/posts/"> Posts </a><a class="menu-item" href="/tags/"> Tags </a><a class="menu-item" href="/categories/"> Categories </a><a class="menu-item" href="/about/"> About </a><span class="menu-item delimiter"></span><span class="menu-item search" id="search-desktop">
                        <input type="text" placeholder="Search titles or contents..." id="search-input-desktop">
                        <a href="javascript:void(0);" class="search-button search-toggle" id="search-toggle-desktop" title="Search">
                            <i class="fas fa-search fa-fw" aria-hidden="true"></i>
                        </a>
                        <a href="javascript:void(0);" class="search-button search-clear" id="search-clear-desktop" title="Clear">
                            <i class="fas fa-times-circle fa-fw" aria-hidden="true"></i>
                        </a>
                        <span class="search-button search-loading" id="search-loading-desktop">
                            <i class="fas fa-spinner fa-fw fa-spin" aria-hidden="true"></i>
                        </span>
                    </span><a href="javascript:void(0);" class="menu-item theme-switch" title="Switch Theme">
                    <i class="fas fa-adjust fa-fw" aria-hidden="true"></i>
                </a></div>
        </div>
    </div>
</header><header class="mobile" id="header-mobile">
    <div class="header-container">
        <div class="header-wrapper">
            <div class="header-title">
                <a href="/" title="Jorge Ortiz-Fuentes&#39; DevBites">Jorge Ortiz-Fuentes&#39; DevBites</a>
            </div>
            <div class="menu-toggle" id="menu-toggle-mobile">
                <span></span><span></span><span></span>
            </div>
        </div>
        <div class="menu" id="menu-mobile"><div class="search-wrapper">
                    <div class="search mobile" id="search-mobile">
                        <input type="text" placeholder="Search titles or contents..." id="search-input-mobile">
                        <a href="javascript:void(0);" class="search-button search-toggle" id="search-toggle-mobile" title="Search">
                            <i class="fas fa-search fa-fw" aria-hidden="true"></i>
                        </a>
                        <a href="javascript:void(0);" class="search-button search-clear" id="search-clear-mobile" title="Clear">
                            <i class="fas fa-times-circle fa-fw" aria-hidden="true"></i>
                        </a>
                        <span class="search-button search-loading" id="search-loading-mobile">
                            <i class="fas fa-spinner fa-fw fa-spin" aria-hidden="true"></i>
                        </span>
                    </div>
                    <a href="javascript:void(0);" class="search-cancel" id="search-cancel-mobile">
                        Cancel
                    </a>
                </div><a class="menu-item" href="/posts/" title="">Posts</a><a class="menu-item" href="/tags/" title="">Tags</a><a class="menu-item" href="/categories/" title="">Categories</a><a class="menu-item" href="/about/" title="">About</a><a href="javascript:void(0);" class="menu-item theme-switch" title="Switch Theme">
                <i class="fas fa-adjust fa-fw" aria-hidden="true"></i>
            </a></div>
    </div>
</header><div class="search-dropdown desktop">
        <div id="search-dropdown-desktop"></div>
    </div>
    <div class="search-dropdown mobile">
        <div id="search-dropdown-mobile"></div>
    </div><main class="main">
                <div class="container"><div class="toc" id="toc-auto">
            <h2 class="toc-title">Contents</h2>
            <div class="toc-content" id="toc-content-auto"></div>
        </div><article class="page single"><h1 class="single-title animate__animated animate__flipInX">Using Oracle db26ai from Rust with the oracle crate</h1><h2 class="single-subtitle">Part 2: DML, DDL, and vector search</h2><div class="post-meta">
            <div class="post-meta-line"><span class="post-author"><a href="https://www.linkedin.com/in/jorgeortiz/" title="Author" target="_blank" rel="noopener noreffer author" class="author"><i class="fas fa-user-circle fa-fw" aria-hidden="true"></i>Jorge Ortiz-Fuentes</a></span>&nbsp;<span class="post-category">included in <a href="/categories/tutorial/"><i class="far fa-folder fa-fw" aria-hidden="true"></i>Tutorial</a></span></div>
            <div class="post-meta-line"><i class="far fa-calendar-alt fa-fw" aria-hidden="true"></i>&nbsp;<time datetime="2026-01-23">2026-01-23</time>&nbsp;<i class="fas fa-pencil-alt fa-fw" aria-hidden="true"></i>&nbsp;1715 words&nbsp;
                <i class="far fa-clock fa-fw" aria-hidden="true"></i>&nbsp;9 minutes&nbsp;</div>
        </div><div class="featured-image"><img
        class="lazyload"
        src="/svg/loading.min.svg"
        data-src="/posts/rust_use_oracle_db26ai_with_oracle_crate_2/header-image.jpg"
        data-srcset="/posts/rust_use_oracle_db26ai_with_oracle_crate_2/header-image.jpg, /posts/rust_use_oracle_db26ai_with_oracle_crate_2/header-image.jpg 1.5x, /posts/rust_use_oracle_db26ai_with_oracle_crate_2/header-image.jpg 2x"
        data-sizes="auto"
        alt="/posts/rust_use_oracle_db26ai_with_oracle_crate_2/header-image.jpg"
        title="Ferris using the keyboard to work with data" width="832" height="448" /></div><div class="details toc" id="toc-static"  data-kept="">
                <div class="details-summary toc-title">
                    <span>Contents</span>
                    <span><i class="details-icon fas fa-angle-right" aria-hidden="true"></i></span>
                </div>
                <div class="details-content toc-content" id="toc-content-static"><nav id="TableOfContents">
<ul>
<li><a href="#headline-1">Change data with Data Manipulation Language</a>
<ul>
<li><a href="#headline-2">Add data</a>
</li>
<li><a href="#headline-3">Delete data</a>
</li>
</ul>
</li>
<li><a href="#headline-4">Modify the schema with Data Definition Language</a>
<ul>
<li><a href="#headline-5">Connecting with privileges</a>
</li>
<li><a href="#headline-6">Configure the DB for embeddings</a>
</li>
</ul>
</li>
<li><a href="#headline-7">Use vector search</a>
<ul>
<li><a href="#headline-8">Playing with vectors</a>
</li>
<li><a href="#headline-9">Using vector search</a>
</li>
</ul>
</li>
<li><a href="#headline-10">Summary</a>
</li>
<li><a href="#headline-11">Footnotes</a>
</li>
</ul>
</nav></div>
            </div><div class="content" id="content">
<blockquote>
<p>WARNING:</p>
<p>
This article closely mirrors the one about <a href="/posts/rust_use_oracle_db26ai_with_sibyl_crate_1/">Using Oracle from Rust with <code class="verbatim">sibyl</code></a>, as both are designed to be
self-contained.  You can read them either independently, sequentially, or use them to compare what they can offer to
you.</p>
</blockquote>
<p>
In this article, I will use the <a href="https://crates.io/crates/oracle">oracle</a> crate to modify data, create and drop new tables and indexes, and perform a vector
search from Rust code.  I have <a href="/posts/rust_use_oracle_db26ai_with_oracle_crate_1/">already explained how to use it to make queries in different ways</a> and how to
easily set up an environment to work with it.  If you want to read that first, I will wait for you here.</p>
<div id="outline-container-headline-1" class="outline-2">
<h2 id="headline-1">
Change data with Data Manipulation Language
</h2>
<div id="outline-text-headline-1" class="outline-text-2">
<p>So far, I have shown how to use the <code class="verbatim">oracle</code> crate to use SQL and query the database.  Nevertheless, we can also use
DML commands to add, modify, or delete records.  However, those require using the <code>execute()</code> methods
provided by <code>Connection</code> or <code>Statement</code>.</p>
<div id="outline-container-headline-2" class="outline-3">
<h3 id="headline-2">
Add data
</h3>
<div id="outline-text-headline-2" class="outline-text-3">
<p>Using an SQL insert statement, is very similar to what we have done so far.  It can be used directly with the
<code>execute()</code> method of the <code>Connection</code> type.</p>
<div class="src src-rust">
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-rust" data-lang="rust"><span class="line"><span class="cl"><span class="w">  </span><span class="kd">let</span><span class="w"> </span><span class="n">sql_insert</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&#34;INSERT INTO products </span><span class="se">\</span><span class="s">
</span></span></span><span class="line"><span class="cl"><span class="s">                    (product_name, unit_price) </span><span class="se">\</span><span class="s">
</span></span></span><span class="line"><span class="cl"><span class="s">                    VALUES (:1, :2)&#34;</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="n">connection</span><span class="p">.</span><span class="n">execute</span><span class="p">(</span><span class="n">sql_insert</span><span class="p">,</span><span class="w"> </span><span class="o">&amp;</span><span class="p">[</span><span class="o">&amp;</span><span class="s">&#34;Tracatron-3000&#34;</span><span class="p">,</span><span class="w"> </span><span class="o">&amp;</span><span class="mf">9.88</span><span class="p">])</span><span class="o">?</span><span class="p">;</span></span></span></code></pre></div>
</div>
<p>
Although this is the simplest way to insert a record into the database, this approach has two problems: we don&#39;t know
the id of the product we have created, and the data isn&#39;t available when we close the connection.</p>
<p>
We can use the following statement instead and invoke it with named arguments.  Then we retrieve the new id using the
<code>returned_values()</code> method of the <code>Statement</code>.  As for the data disappearing after closing the connection, you may have
imagined that all these commands are transactional, and we need to add a commit after executing them or
<code>set_autocommit()</code> in the <code>Connection</code> instance.</p>
<div class="src src-rust">
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-rust" data-lang="rust"><span class="line"><span class="cl"><span class="w">  </span><span class="kd">let</span><span class="w"> </span><span class="n">sql_insert</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&#34;INSERT INTO products </span><span class="se">\</span><span class="s">
</span></span></span><span class="line"><span class="cl"><span class="s">                  (product_name, unit_price) </span><span class="se">\</span><span class="s">
</span></span></span><span class="line"><span class="cl"><span class="s">                  VALUES (:name, :price) </span><span class="se">\</span><span class="s">
</span></span></span><span class="line"><span class="cl"><span class="s">                  RETURNING product_id into :id&#34;</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="kd">let</span><span class="w"> </span><span class="k">mut</span><span class="w"> </span><span class="n">stmt</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">connection</span><span class="p">.</span><span class="n">statement</span><span class="p">(</span><span class="n">sql_insert</span><span class="p">).</span><span class="n">build</span><span class="p">()</span><span class="o">?</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="n">stmt</span><span class="p">.</span><span class="n">execute_named</span><span class="p">(</span><span class="o">&amp;</span><span class="p">[</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">      </span><span class="p">(</span><span class="s">&#34;name&#34;</span><span class="p">,</span><span class="w"> </span><span class="o">&amp;</span><span class="s">&#34;Tracatron-3000&#34;</span><span class="p">),</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">      </span><span class="p">(</span><span class="s">&#34;price&#34;</span><span class="p">,</span><span class="w"> </span><span class="o">&amp;</span><span class="mf">9.88</span><span class="p">),</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">      </span><span class="p">(</span><span class="s">&#34;id&#34;</span><span class="p">,</span><span class="w"> </span><span class="o">&amp;</span><span class="nb">None</span>::<span class="o">&lt;</span><span class="kt">i32</span><span class="o">&gt;</span><span class="p">),</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="p">])</span><span class="o">?</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="kd">let</span><span class="w"> </span><span class="n">new_product_id</span>: <span class="kt">i32</span> <span class="o">=</span><span class="w"> </span><span class="n">stmt</span><span class="p">.</span><span class="n">returned_values</span><span class="p">(</span><span class="s">&#34;id&#34;</span><span class="p">)</span><span class="o">?</span><span class="p">[</span><span class="mi">0</span><span class="p">];</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="fm">println!</span><span class="p">(</span><span class="s">&#34;New product </span><span class="si">{new_product_id}</span><span class="s"> created&#34;</span><span class="p">);</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="n">connection</span><span class="p">.</span><span class="n">commit</span><span class="p">()</span><span class="o">?</span><span class="p">;</span></span></span></code></pre></div>
</div>
<p>Run this version and verify that the product is created from SQLcl using the following statement.</p>
<div class="src src-sql">
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-sql" data-lang="sql"><span class="line"><span class="cl"><span class="w">  </span><span class="k">SELECT</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="k">FROM</span><span class="w"> </span><span class="n">PRODUCTS</span><span class="w"> </span><span class="k">WHERE</span><span class="w"> </span><span class="n">PRODUCT_NAME</span><span class="w"> </span><span class="k">LIKE</span><span class="w"> </span><span class="s1">&#39;Tra%&#39;</span><span class="p">;</span></span></span></code></pre></div>
</div>
<p>You can then delete it with the corresponding id.</p>
<div class="src src-sql">
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-sql" data-lang="sql"><span class="line"><span class="cl"><span class="w">  </span><span class="k">DELETE</span><span class="w"> </span><span class="k">FROM</span><span class="w"> </span><span class="n">PRODUCTS</span><span class="w"> </span><span class="k">WHERE</span><span class="w"> </span><span class="n">PRODUCT_ID</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="o">&lt;</span><span class="n">the</span><span class="w"> </span><span class="n">id</span><span class="w"> </span><span class="n">displayed</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">previous</span><span class="w"> </span><span class="k">result</span><span class="o">&gt;</span><span class="p">;</span></span></span></code></pre></div>
</div>
</div>
</div>
<div id="outline-container-headline-3" class="outline-3">
<h3 id="headline-3">
Delete data
</h3>
<div id="outline-text-headline-3" class="outline-text-3">
<p>We can now update or delete this product from Rust by executing the corresponding SQL statement.  I have chosen to
delete it, so the execution of this code is (mostly<sup class="footnote-reference"><a id="footnote-reference-1" href="#footnote-1">1</a></sup>) idempotent.</p>
<div class="src src-rust">
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-rust" data-lang="rust"><span class="line"><span class="cl"><span class="w">  </span><span class="kd">let</span><span class="w"> </span><span class="n">sql_delete</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&#34;DELETE FROM products where product_id = :1&#34;</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="kd">let</span><span class="w"> </span><span class="k">mut</span><span class="w"> </span><span class="n">stmt</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">connection</span><span class="p">.</span><span class="n">statement</span><span class="p">(</span><span class="n">sql_delete</span><span class="p">).</span><span class="n">build</span><span class="p">()</span><span class="o">?</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="n">stmt</span><span class="p">.</span><span class="n">execute</span><span class="p">(</span><span class="o">&amp;</span><span class="p">[</span><span class="o">&amp;</span><span class="n">new_product_id</span><span class="p">])</span><span class="o">?</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="n">connection</span><span class="p">.</span><span class="n">commit</span><span class="p">()</span><span class="o">?</span><span class="p">;</span></span></span></code></pre></div>
</div>
<p>If you run the code with this new snippet, you shouldn&#39;t be able to find the product because it is deleted after its
creation.  Magic! ðŸª„</p>
</div>
</div>
</div>
</div>
<div id="outline-container-headline-4" class="outline-2">
<h2 id="headline-4">
Modify the schema with Data Definition Language
</h2>
<div id="outline-text-headline-4" class="outline-text-2">
<p>I have shared everything you need to achieve full CRUD capabilities, but we can go a step further and create a table and
modify some parameters.  I don&#39;t recommend doing this as part of the main application because it requires SYSDBA
privileges, and it isn&#39;t a good idea to always have access to the required credentials in your application.  However, it
might be the case that you write an installation application and don&#39;t want it to be a script that your customers can
modify, which could create all kinds of support havoc.</p>
<div id="outline-container-headline-5" class="outline-3">
<h3 id="headline-5">
Connecting with privileges
</h3>
<div id="outline-text-headline-5" class="outline-text-3">
<p>The connection that we have been using so far was a regular one with the user CO and its password, but if we want to
modify some parameters and change the schema, we need a privileged connection.  The <code class="verbatim">oracle</code> crate provides <code>Connector</code>
that is a <code>Connection</code> builder, allowing us to tune the parameters of the connection we want to create.  We will use the
SYS user and its password (the one we used when we started the container), then the <code>privilege()</code> method.  And if the
credentials are correct, we will now have a privileged connection.  Notice that this is a different connection even
though the variable name is the same: it shadows the previous one, but I have scoped it with curly braces, so all the
configuration that we could have applied to the previous one wouldn&#39;t be lost.</p>
<div class="src src-rust">
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-rust" data-lang="rust"><span class="line"><span class="cl"><span class="w">  </span><span class="p">{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">      </span><span class="kd">let</span><span class="w"> </span><span class="n">connection</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Connector</span>::<span class="n">new</span><span class="p">(</span><span class="s">&#34;sys&#34;</span><span class="p">,</span><span class="w"> </span><span class="s">&#34;0pen-S3sam3.&#34;</span><span class="p">,</span><span class="w"> </span><span class="s">&#34;localhost:1521/FREEPDB1&#34;</span><span class="p">)</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">          </span><span class="p">.</span><span class="n">privilege</span><span class="p">(</span><span class="n">Privilege</span>::<span class="n">Sysdba</span><span class="p">)</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">          </span><span class="p">.</span><span class="n">connect</span><span class="p">()</span><span class="o">?</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="p">}</span></span></span></code></pre></div>
</div>
<p>
Inside that scope, we can run a query to get the value of the parameter we modified in the setup.  This isn&#39;t a
privileged operation, but changing it would be.</p>
<div class="src src-rust">
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-rust" data-lang="rust"><span class="line"><span class="cl"><span class="w">  </span><span class="kd">let</span><span class="w"> </span><span class="n">row</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">connection</span><span class="p">.</span><span class="n">query_row</span><span class="p">(</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">      </span><span class="s">&#34;SELECT value FROM v$parameter WHERE name = &#39;vector_memory_size&#39;&#34;</span><span class="p">,</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">      </span><span class="o">&amp;</span><span class="p">[],</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="p">)</span><span class="o">?</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="kd">let</span><span class="w"> </span><span class="n">value</span>: <span class="kt">i32</span> <span class="o">=</span><span class="w"> </span><span class="n">row</span><span class="p">.</span><span class="n">get</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span><span class="o">?</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="fm">println!</span><span class="p">(</span><span class="s">&#34;</span><span class="se">\n</span><span class="s">vector_memory_size: </span><span class="si">{value}</span><span class="s">&#34;</span><span class="p">);</span></span></span></code></pre></div>
</div>
<p>
Run the new version of the code and the parameter&#39;s value will be displayed, and should hopefully be the value that we
set.  If that isn&#39;t the case, check the database setup, as we will need it for the next steps. ðŸš¨</p>
</div>
</div>
<div id="outline-container-headline-6" class="outline-3">
<h3 id="headline-6">
Configure the DB for embeddings
</h3>
<div id="outline-text-headline-6" class="outline-text-3">
<p>Since the plan is to perform vector search, I&#39;d like to modify the schema by adding a new table for embeddings.  The
table will have an auto-generated primary key, a field that will be used to identify each record, and a vector embedding.</p>
<p>
I have taken the liberty of cutting some corners to make the code easier to read and understand.  The most obvious one
is the number of elements in the vector, which is only 5.  That wouldn&#39;t be enough for any current embedding
model<sup class="footnote-reference"><a id="footnote-reference-2" href="#footnote-2">2</a></sup>, but it makes the search easier and intuitive, given a well-designed dataset.  Also, there might be better
ways to relate these embeddings to the products they refer to using their primary keys, but this makes the results
displayable.</p>
<p>
Efficient searches in high-dimensional spaces are greatly simplified with an index.  I will add one that improves the
search, assuming I will be using the cosine distance (i.e., that I care about where the vectors point, not their size),
which is a common use case in scenarios like semantic search in text documents.</p>
<div class="src src-rust">
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-rust" data-lang="rust"><span class="line"><span class="cl"><span class="w">  </span><span class="fm">println!</span><span class="p">(</span><span class="s">&#34;</span><span class="se">\n</span><span class="s">Creating embeddings table.&#34;</span><span class="p">);</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="kd">let</span><span class="w"> </span><span class="n">ddl_create_table</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&#34;CREATE TABLE embeddings (</span><span class="se">\</span><span class="s">
</span></span></span><span class="line"><span class="cl"><span class="s">                          item_id NUMBER GENERATED ALWAYS AS IDENTITY (START WITH 1000 INCREMENT BY 1) PRIMARY KEY, </span><span class="se">\</span><span class="s">
</span></span></span><span class="line"><span class="cl"><span class="s">                          prod_desc VARCHAR2(100), </span><span class="se">\</span><span class="s">
</span></span></span><span class="line"><span class="cl"><span class="s">                          emb_vector VECTOR(5, FLOAT32)</span><span class="se">\</span><span class="s">
</span></span></span><span class="line"><span class="cl"><span class="s">                          )&#34;</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="kd">let</span><span class="w"> </span><span class="k">mut</span><span class="w"> </span><span class="n">stmt</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">connection</span><span class="p">.</span><span class="n">statement</span><span class="p">(</span><span class="n">ddl_create_table</span><span class="p">).</span><span class="n">build</span><span class="p">()</span><span class="o">?</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="n">stmt</span><span class="p">.</span><span class="n">execute</span><span class="p">(</span><span class="o">&amp;</span><span class="p">[])</span><span class="o">?</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="fm">println!</span><span class="p">(</span><span class="s">&#34;Creating embeddings index.&#34;</span><span class="p">);</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="kd">let</span><span class="w"> </span><span class="n">ddl_create_idx</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&#34;CREATE VECTOR INDEX embeddings_vector_index </span><span class="se">\</span><span class="s">
</span></span></span><span class="line"><span class="cl"><span class="s">                        ON embeddings (emb_vector) </span><span class="se">\</span><span class="s">
</span></span></span><span class="line"><span class="cl"><span class="s">                        ORGANIZATION INMEMORY NEIGHBOR GRAPH </span><span class="se">\</span><span class="s">
</span></span></span><span class="line"><span class="cl"><span class="s">                        DISTANCE COSINE </span><span class="se">\</span><span class="s">
</span></span></span><span class="line"><span class="cl"><span class="s">                        WITH TARGET ACCURACY 95&#34;</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="kd">let</span><span class="w"> </span><span class="k">mut</span><span class="w"> </span><span class="n">stmt</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">connection</span><span class="p">.</span><span class="n">statement</span><span class="p">(</span><span class="n">ddl_create_idx</span><span class="p">).</span><span class="n">build</span><span class="p">()</span><span class="o">?</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="n">stmt</span><span class="p">.</span><span class="n">execute</span><span class="p">(</span><span class="o">&amp;</span><span class="p">[])</span><span class="o">?</span><span class="p">;</span></span></span></code></pre></div>
</div>
<p>
These statements are executed immediately; there is no need to issue a commit.  So if you execute this and haven&#39;t
included the code to drop the table yet, use SQLcl to restore the previous state.</p>
<div class="src src-sql">
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-sql" data-lang="sql"><span class="line"><span class="cl"><span class="w">  </span><span class="k">DROP</span><span class="w"> </span><span class="k">TABLE</span><span class="w"> </span><span class="n">embeddings</span><span class="p">;</span></span></span></code></pre></div>
</div>
<p>
Instead, I&#39;d recommend adding the code that drops the tables (and the index) first.</p>
<div class="src src-rust">
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-rust" data-lang="rust"><span class="line"><span class="cl"><span class="w">  </span><span class="fm">println!</span><span class="p">(</span><span class="s">&#34;Droping embeddings table.&#34;</span><span class="p">);</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="kd">let</span><span class="w"> </span><span class="n">ddl_drop_table</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&#34;DROP TABLE embeddings&#34;</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="kd">let</span><span class="w"> </span><span class="k">mut</span><span class="w"> </span><span class="n">stmt</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">connection</span><span class="p">.</span><span class="n">statement</span><span class="p">(</span><span class="n">ddl_drop_table</span><span class="p">).</span><span class="n">build</span><span class="p">()</span><span class="o">?</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="n">stmt</span><span class="p">.</span><span class="n">execute</span><span class="p">(</span><span class="o">&amp;</span><span class="p">[])</span><span class="o">?</span><span class="p">;</span></span></span></code></pre></div>
</div>
<p>Now we are ready to execute the whole code and let it shine. Cool! ðŸ˜Ž</p>
</div>
</div>
</div>
</div>
<div id="outline-container-headline-7" class="outline-2">
<h2 id="headline-7">
Use vector search
</h2>
<div id="outline-text-headline-7" class="outline-text-2">
<p>As a final example of what can be done with the <code class="verbatim">oracle</code> crate, I will insert data into the newly created <code class="verbatim">embeddings</code>
table and perform a vector search to demonstrate that it works as expected.</p>
<p>
All the code in this section belongs <strong>between</strong> the creation of the <code class="verbatim">embeddings</code> table and its index <strong>and</strong> the dropping
of the table.</p>
<div id="outline-container-headline-8" class="outline-3">
<h3 id="headline-8">
Playing with vectors
</h3>
<div id="outline-text-headline-8" class="outline-text-3">
<p>I will start by showing how to add one record to the <code class="verbatim">embeddings</code> table.  Since the primary key is auto-generated, I
will not include it in the statement.  The value for the <code class="verbatim">prod_desc</code> column is just a string, and I will use a textual
representation of the vector for setting the value of the binding variable.</p>
<div class="src src-rust">
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-rust" data-lang="rust"><span class="line"><span class="cl"><span class="w">  </span><span class="kd">let</span><span class="w"> </span><span class="n">sql_insert_vec</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&#34;INSERT INTO embeddings (prod_desc, emb_vector) VALUES (:1, :2)&#34;</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="kd">let</span><span class="w"> </span><span class="n">vector</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="fm">vec!</span><span class="p">[</span><span class="mf">0.1</span><span class="k">f32</span><span class="p">,</span><span class="w"> </span><span class="mf">0.2</span><span class="p">,</span><span class="w"> </span><span class="mf">0.3</span><span class="p">,</span><span class="w"> </span><span class="mf">0.4</span><span class="p">,</span><span class="w"> </span><span class="mf">0.5</span><span class="p">];</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="kd">let</span><span class="w"> </span><span class="k">mut</span><span class="w"> </span><span class="n">stmt</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">connection</span><span class="p">.</span><span class="n">statement</span><span class="p">(</span><span class="n">sql_insert_vec</span><span class="p">).</span><span class="n">build</span><span class="p">()</span><span class="o">?</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="kd">let</span><span class="w"> </span><span class="n">vector_str</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="fm">format!</span><span class="p">(</span><span class="s">&#34;</span><span class="si">{vector:?}</span><span class="s">&#34;</span><span class="p">);</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="n">stmt</span><span class="p">.</span><span class="n">execute</span><span class="p">(</span><span class="o">&amp;</span><span class="p">[</span><span class="o">&amp;</span><span class="s">&#34;Tracatron-3000&#34;</span><span class="p">,</span><span class="w"> </span><span class="o">&amp;</span><span class="n">vector_str</span><span class="p">])</span><span class="o">?</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="n">connection</span><span class="p">.</span><span class="n">commit</span><span class="p">()</span><span class="o">?</span><span class="p">;</span></span></span></code></pre></div>
</div>
<p>
This should compile and run, but it would be no fun to search for just a single record.  Let&#39;s solve that with some
data.  I have created five items, and three of them have a high value on their first dimension and quite small on the
others, making them point close to the axis of that dimension.  The other two are pointing elsewhere.  Let&#39;s replace the
code to insert one vector with this new one.</p>
<div class="src src-rust">
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-rust" data-lang="rust"><span class="line"><span class="cl"><span class="w">    </span><span class="kd">let</span><span class="w"> </span><span class="n">sql_insert_vec</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&#34;INSERT INTO embeddings (prod_desc, emb_vector) VALUES (:1, :2)&#34;</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="kd">let</span><span class="w"> </span><span class="n">vec_data</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="fm">vec!</span><span class="p">[</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="p">(</span><span class="s">&#34;Dark coat&#34;</span><span class="p">,</span><span class="w"> </span><span class="fm">vec!</span><span class="p">[</span><span class="mf">0.1</span><span class="k">f32</span><span class="p">,</span><span class="w"> </span><span class="mf">0.2</span><span class="p">,</span><span class="w"> </span><span class="mf">0.9</span><span class="p">,</span><span class="w"> </span><span class="mf">0.1</span><span class="p">,</span><span class="w"> </span><span class="mf">0.3</span><span class="p">]),</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="p">(</span><span class="s">&#34;Nice wearable&#34;</span><span class="p">,</span><span class="w"> </span><span class="fm">vec!</span><span class="p">[</span><span class="mf">0.7</span><span class="k">f32</span><span class="p">,</span><span class="w"> </span><span class="mf">0.2</span><span class="p">,</span><span class="w"> </span><span class="mf">0.3</span><span class="p">,</span><span class="w"> </span><span class="mf">0.2</span><span class="p">,</span><span class="w"> </span><span class="mf">0.1</span><span class="p">]),</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="p">(</span><span class="s">&#34;Comfy socks&#34;</span><span class="p">,</span><span class="w"> </span><span class="fm">vec!</span><span class="p">[</span><span class="mf">0.3</span><span class="k">f32</span><span class="p">,</span><span class="w"> </span><span class="mf">0.3</span><span class="p">,</span><span class="w"> </span><span class="mf">0.3</span><span class="p">,</span><span class="w"> </span><span class="mf">0.3</span><span class="p">,</span><span class="w"> </span><span class="mf">0.3</span><span class="p">]),</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="p">(</span><span class="s">&#34;Tracatron-3000&#34;</span><span class="p">,</span><span class="w"> </span><span class="fm">vec!</span><span class="p">[</span><span class="mf">0.9</span><span class="k">f32</span><span class="p">,</span><span class="w"> </span><span class="mf">0.1</span><span class="p">,</span><span class="w"> </span><span class="mf">0.1</span><span class="p">,</span><span class="w"> </span><span class="mf">0.1</span><span class="p">,</span><span class="w"> </span><span class="mf">0.1</span><span class="p">]),</span><span class="w"> </span><span class="c1">// Mostly pointing to axis of first dimension
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="w">        </span><span class="p">(</span><span class="s">&#34;Tracatron-2000&#34;</span><span class="p">,</span><span class="w"> </span><span class="fm">vec!</span><span class="p">[</span><span class="mf">0.9</span><span class="k">f32</span><span class="p">,</span><span class="w"> </span><span class="mf">0.3</span><span class="p">,</span><span class="w"> </span><span class="mf">0.3</span><span class="p">,</span><span class="w"> </span><span class="mf">0.3</span><span class="p">,</span><span class="w"> </span><span class="mf">0.4</span><span class="p">]),</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="p">];</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="kd">let</span><span class="w"> </span><span class="k">mut</span><span class="w"> </span><span class="n">stmt</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">connection</span><span class="p">.</span><span class="n">statement</span><span class="p">(</span><span class="n">sql_insert_vec</span><span class="p">).</span><span class="n">build</span><span class="p">()</span><span class="o">?</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="k">for</span><span class="w"> </span><span class="n">pair</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="n">vec_data</span><span class="w"> </span><span class="p">{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="kd">let</span><span class="w"> </span><span class="n">vector_str</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="fm">format!</span><span class="p">(</span><span class="s">&#34;</span><span class="si">{:?}</span><span class="s">&#34;</span><span class="p">,</span><span class="w"> </span><span class="n">pair</span><span class="p">.</span><span class="mi">1</span><span class="p">);</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="n">stmt</span><span class="p">.</span><span class="n">execute</span><span class="p">(</span><span class="o">&amp;</span><span class="p">[</span><span class="o">&amp;</span><span class="n">pair</span><span class="p">.</span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="o">&amp;</span><span class="n">vector_str</span><span class="p">])</span><span class="o">?</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="p">}</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="n">connection</span><span class="p">.</span><span class="n">commit</span><span class="p">()</span><span class="o">?</span><span class="p">;</span></span></span></code></pre></div>
</div>
</div>
</div>
<div id="outline-container-headline-9" class="outline-3">
<h3 id="headline-9">
Using vector search
</h3>
<div id="outline-text-headline-9" class="outline-text-3">
<p>Now, let&#39;s go with the search. I will ask the database to select the first three rows based on vector distance, and I
will pass a vector that mostly points along the first dimension. The query will return at most 3 rows of the expected
records, which will be parsed and printed.</p>
<div class="src src-rust">
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-rust" data-lang="rust"><span class="line"><span class="cl"><span class="w">  </span><span class="kd">let</span><span class="w"> </span><span class="n">sql_query_vec</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&#34;SELECT prod_desc FROM embeddings </span><span class="se">\</span><span class="s">
</span></span></span><span class="line"><span class="cl"><span class="s">                       ORDER BY VECTOR_DISTANCE(emb_vector, :1) </span><span class="se">\</span><span class="s">
</span></span></span><span class="line"><span class="cl"><span class="s">                       FETCH FIRST 3 ROWS ONLY&#34;</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="kd">let</span><span class="w"> </span><span class="n">vector</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="fm">vec!</span><span class="p">[</span><span class="mf">0.8</span><span class="k">f32</span><span class="p">,</span><span class="w"> </span><span class="mf">0.1</span><span class="p">,</span><span class="w"> </span><span class="mf">0.2</span><span class="p">,</span><span class="w"> </span><span class="mf">0.1</span><span class="p">,</span><span class="w"> </span><span class="mf">0.1</span><span class="p">];</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="kd">let</span><span class="w"> </span><span class="n">vector_str</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="fm">format!</span><span class="p">(</span><span class="s">&#34;</span><span class="si">{vector:?}</span><span class="s">&#34;</span><span class="p">);</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="fm">println!</span><span class="p">(</span><span class="s">&#34;Similar products to vector: &#39;</span><span class="si">{vector_str}</span><span class="s">&#39;&#34;</span><span class="p">);</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="kd">let</span><span class="w"> </span><span class="k">mut</span><span class="w"> </span><span class="n">stmt</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">connection</span><span class="p">.</span><span class="n">statement</span><span class="p">(</span><span class="n">sql_query_vec</span><span class="p">).</span><span class="n">build</span><span class="p">()</span><span class="o">?</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="k">for</span><span class="w"> </span><span class="n">row</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="n">stmt</span><span class="p">.</span><span class="n">query</span><span class="p">(</span><span class="o">&amp;</span><span class="p">[</span><span class="o">&amp;</span><span class="n">vector_str</span><span class="p">])</span><span class="o">?</span><span class="w"> </span><span class="p">{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">      </span><span class="kd">let</span><span class="w"> </span><span class="n">row</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">row</span><span class="o">?</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">      </span><span class="kd">let</span><span class="w"> </span><span class="n">product_name</span>: <span class="nb">String</span> <span class="o">=</span><span class="w"> </span><span class="n">row</span><span class="p">.</span><span class="n">get</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span><span class="o">?</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">      </span><span class="fm">println!</span><span class="p">(</span><span class="s">&#34;- </span><span class="si">{product_name}</span><span class="s">&#34;</span><span class="p">);</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="p">}</span></span></span></code></pre></div>
</div>
<p>Call your friends and family and run the code now.  You are doing vector search from Rust.  Look, Ma, no Python! ðŸ˜</p>
</div>
</div>
</div>
</div>
<div id="outline-container-headline-10" class="outline-2">
<h2 id="headline-10">
Summary
</h2>
<div id="outline-text-headline-10" class="outline-text-2">
<p>After explaining how to spin up a development environment with the <a href="https://oaim.short.gy/db26ai-rust-drivers">Oracle AI db26ai free container</a> and how to query data
from Rust, this article I have explained how to add, modify, and delete data, change the schema, and work with
vectors.</p>
<p>
I have covered the main needs for an application, including the ability to perform vector search and to add that AI
feature that you wanted without using anything other than Rust and Oracle AI db26ai.  You can find the code of this
article and other related ones in this <a href="https://github.com/jdortiz/oracle-from-rust">repo</a>.  I hope these are useful for your projects, but let me know if there are
other things you would like me to explore.</p>
<p>
Stay curious. Hack your code. See you next time!</p>
</div>
</div>
<div id="outline-container-headline-11" class="outline-2">
<h2 id="headline-11">
Footnotes
</h2>
</div>
<div class="footnotes">
<hr class="footnotes-separatator"/>
<div class="footnote-definitions">
<div class="footnote-definition">
<sup id="footnote-1"><a href="#footnote-reference-1">1</a></sup>
<div class="footnote-body">
<p>Generated IDs aren&#39;t reused.</p>
</div>
</div>
<div class="footnote-definition">
<sup id="footnote-2"><a href="#footnote-reference-2">2</a></sup>
<div class="footnote-body">
<p>Generally greater than 512 dimensions.</p>
</div>
</div>
</div>
</div>
</div><div class="post-footer" id="post-footer">
    <div class="post-info">
        <div class="post-info-line">
            <div class="post-info-mod">
                <span>Updated on 2026-01-23</span>
            </div></div>
        <div class="post-info-line">
            <div class="post-info-md"></div>
            <div class="post-info-share">
                <span><a href="javascript:void(0);" title="Share on Twitter" data-sharer="twitter" data-url="https://jorgeortiz.dev/posts/rust_use_oracle_db26ai_with_oracle_crate_2/" data-title="Using Oracle db26ai from Rust with the oracle crate" data-hashtags="rust,db"><i class="fab fa-twitter fa-fw" aria-hidden="true"></i></a><a href="javascript:void(0);" title="Share on Linkedin" data-sharer="linkedin" data-url="https://jorgeortiz.dev/posts/rust_use_oracle_db26ai_with_oracle_crate_2/"><i class="fab fa-linkedin fa-fw" aria-hidden="true"></i></a><a href="javascript:void(0);" title="Share on WhatsApp" data-sharer="whatsapp" data-url="https://jorgeortiz.dev/posts/rust_use_oracle_db26ai_with_oracle_crate_2/" data-title="Using Oracle db26ai from Rust with the oracle crate" data-web><i class="fab fa-whatsapp fa-fw" aria-hidden="true"></i></a><a href="javascript:void(0);" title="Share on Reddit" data-sharer="reddit" data-url="https://jorgeortiz.dev/posts/rust_use_oracle_db26ai_with_oracle_crate_2/"><i class="fab fa-reddit fa-fw" aria-hidden="true"></i></a></span>
            </div>
        </div>
    </div>

    <div class="post-info-more">
        <section class="post-tags"><i class="fas fa-tags fa-fw" aria-hidden="true"></i>&nbsp;<a href="/tags/rust/">Rust</a>,&nbsp;<a href="/tags/db/">Db</a></section>
        <section>
            <span><a href="javascript:void(0);" onclick="window.history.back();">Back</a></span>&nbsp;|&nbsp;<span><a href="/">Home</a></span>
        </section>
    </div>

    <div class="post-nav"><a href="/posts/rust_use_oracle_db26ai_with_sibyl_crate_1/" class="prev" rel="prev" title="Using Oracle db26ai from Rust with the sibyl crate"><i class="fas fa-angle-left fa-fw" aria-hidden="true"></i>Using Oracle db26ai from Rust with the sibyl crate</a></div>
</div>
</article></div>
            </main><footer class="footer">
        <div class="footer-container"><div class="footer-line">Powered by <a href="https://gohugo.io/" target="_blank" rel="noopener noreffer" title="Hugo 0.152.2">Hugo</a> | Theme - <a href="https://github.com/dillonzq/LoveIt" target="_blank" rel="noopener noreffer" title="LoveIt 0.3.0"><i class="far fa-kiss-wink-heart fa-fw" aria-hidden="true"></i> LoveIt</a>
                </div><div class="footer-line" itemscope itemtype="http://schema.org/CreativeWork"><i class="far fa-copyright fa-fw" aria-hidden="true"></i><span itemprop="copyrightYear">2025 - 2026</span><span class="author" itemprop="copyrightHolder">&nbsp;<a href="https://www.linkedin.com/in/jorgeortiz/" target="_blank">Jorge Ortiz-Fuentes</a></span>&nbsp;|&nbsp;<span class="license"><a rel="license external nofollow noopener noreffer" href="https://creativecommons.org/licenses/by-nc/4.0/" target="_blank">CC BY-NC 4.0</a></span></div>
        </div>
    </footer></div>

        <div id="fixed-buttons"><a href="#" id="back-to-top" class="fixed-button" title="Back to Top">
                <i class="fas fa-arrow-up fa-fw" aria-hidden="true"></i>
            </a><a href="#" id="view-comments" class="fixed-button" title="View Comments">
                <i class="fas fa-comment fa-fw" aria-hidden="true"></i>
            </a>
        </div><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.16.0/dist/katex.min.css"><script type="text/javascript" src="https://cdn.jsdelivr.net/npm/autocomplete.js@0.38.1/dist/autocomplete.min.js"></script><script type="text/javascript" src="https://cdn.jsdelivr.net/npm/lunr@2.3.9/lunr.min.js"></script><script type="text/javascript" src="https://cdn.jsdelivr.net/npm/lazysizes@5.3.2/lazysizes.min.js"></script><script type="text/javascript" src="https://cdn.jsdelivr.net/npm/clipboard@2.0.11/dist/clipboard.min.js"></script><script type="text/javascript" src="https://cdn.jsdelivr.net/npm/sharer.js@0.5.1/sharer.min.js"></script><script type="text/javascript" src="https://cdn.jsdelivr.net/npm/katex@0.16.0/dist/katex.min.js"></script><script type="text/javascript" src="https://cdn.jsdelivr.net/npm/katex@0.16.0/dist/contrib/auto-render.min.js"></script><script type="text/javascript" src="https://cdn.jsdelivr.net/npm/katex@0.16.0/dist/contrib/copy-tex.min.js"></script><script type="text/javascript" src="https://cdn.jsdelivr.net/npm/katex@0.16.0/dist/contrib/mhchem.min.js"></script><script type="text/javascript">window.config={"code":{"copyTitle":"Copy to clipboard","maxShownLines":50},"comment":{},"math":{"delimiters":[{"display":true,"left":"$$","right":"$$"},{"display":true,"left":"\\[","right":"\\]"},{"display":true,"left":"\\begin{equation}","right":"\\end{equation}"},{"display":true,"left":"\\begin{equation*}","right":"\\end{equation*}"},{"display":true,"left":"\\begin{align}","right":"\\end{align}"},{"display":true,"left":"\\begin{align*}","right":"\\end{align*}"},{"display":true,"left":"\\begin{alignat}","right":"\\end{alignat}"},{"display":true,"left":"\\begin{alignat*}","right":"\\end{alignat*}"},{"display":true,"left":"\\begin{gather}","right":"\\end{gather}"},{"display":true,"left":"\\begin{CD}","right":"\\end{CD}"},{"display":false,"left":"$","right":"$"},{"display":false,"left":"\\(","right":"\\)"}],"strict":false},"search":{"highlightTag":"em","maxResultLength":10,"noResultsFound":"No results found","snippetLength":30}};</script><script type="text/javascript" src="/js/theme.min.js"></script><script type="text/javascript">
            window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments);}gtag('js', new Date());
            gtag('config', 'G-ELCV7TTK5E', { 'anonymize_ip': true });
        </script><script type="text/javascript" src="https://www.googletagmanager.com/gtag/js?id=G-ELCV7TTK5E" async></script></body>
</html>
